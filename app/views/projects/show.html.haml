= render 'shared/guide' if params[:show_guide].present?


%ul.nav.nav-tabs.append-bottom-20
  %li{class: ref_tab_class}
    = link_to 'All builds', project_path(@project)
  - @project.tracked_refs.each do |ref|
    %li{class: ref_tab_class(ref)}
      = link_to ref, project_path(@project, ref: ref)

  - if @ref && !@project.tracked_refs.include?(@ref)
    %li{class: 'active'}
      = link_to @ref, project_path(@project, ref: @ref)

  - if @project.builds.running.any? || @project.builds.pending.any?
    %span.pull-right
      = link_to cancel_project_path(@project), data: { confirm: 'All builds will be canceled. Are you sure?' }, class: 'btn btn-danger btn-xs', method: :post do
        %i.icon-remove
        Cancel all


- if @ref
  %p
    Paste build status image for #{@ref} with next link
    = link_to '#', class: 'badge-codes-toggle btn btn-default btn-xs' do
      Status Badge
    .badge-codes-block.bs-callout.bs-callout-info.hide
      %p
        Status badge for
        %span.label.label-info #{@ref}
        branch
      %div
        %label Markdown:
        = text_field_tag 'badge_md', markdown_badge_code(@project, @ref), readonly: true, class: 'form-control'
        %label Html:
        = text_field_tag 'badge_html', html_badge_code(@project, @ref), readonly: true, class: 'form-control'




%table.builds
  %thead
    %tr
      %th ID
      %th Status
      %th Commit
      %th Ref
      %th Message
      %th Duration
      %th Finished at

  = render @build_groups

= paginate @build_groups
- if @build_groups.empty?
  .bs-callout
    %h4 No builds yet

:javascript
  new RefreshPage("#{project_url(@project)}", true, 30000)
